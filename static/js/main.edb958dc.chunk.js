(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,i){e.exports=i(64)},41:function(e,t,i){},42:function(e,t,i){},64:function(e,t,i){"use strict";i.r(t);var s=i(0),a=i.n(s),n=i(33),r=i.n(n),h=(i(41),i(2)),l=i(1),o=i(11),d=i(9),y=i(3),c=i(10),u=49,x=50,b=83,p=68,f=86,v=66,w=78,m=77,g=76,k=186,S=189,M=187,O=function(){function e(){Object(h.a)(this,e),this.pressedKeys={},this.pressedKeys.red1={right:0,left:0},this.pressedKeys.red2={right:0,left:0},this.pressedKeys.red3={right:0,left:0},this.pressedKeys.blue1={right:0,left:0},this.pressedKeys.blue2={right:0,left:0},this.pressedKeys.blue3={right:0,left:0}}return Object(l.a)(e,[{key:"bindKeys",value:function(){window.addEventListener("keyup",this.handleKeys.bind(this,!1)),window.addEventListener("keydown",this.handleKeys.bind(this,!0))}},{key:"unbindKeys",value:function(){window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("keydown",this.handleKeys)}}]),Object(l.a)(e,[{key:"handleKeys",value:function(e,t){var i=this.pressedKeys;switch(t.keyCode){case u:i.red1.left=e;break;case x:i.red1.right=e;break;case b:i.red2.left=e;break;case p:i.red2.right=e;break;case f:i.red3.left=e;break;case v:i.red3.right=e;break;case w:i.blue3.left=e;break;case m:i.blue3.right=e;break;case g:i.blue2.left=e;break;case k:i.blue2.right=e;break;case S:i.blue1.left=e;break;case M:i.blue1.right=e}this.pressedKeys=i}}]),e}(),P=(i(42),i(12)),C=i(34);function j(e,t,i,s){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-s,2))}function I(e,t){var i=e.x,s=e.y;return{x:Math.cos(t)*i-Math.sin(t)*s,y:Math.sin(t)*i+Math.cos(t)*s}}function E(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i=t.x*e.x+t.y*e.y,s=e;return s.x-=2*i*t.x,s.y-=2*i*t.y,s}var N=i(4),K=i.n(N),R=function(){function e(t){Object(h.a)(this,e),this.x1=t.x1||0,this.y1=t.y1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.depth=t.depth||10,this.width=t.width||50,this.position=50,this.slidinglength=j(this.x1,this.y1,this.x2,this.y2),this.y1===this.y2?this.tiltAngle=90*Math.PI/180:this.tiltAngle=-Math.atan((this.x2-this.x1)/(this.y2-this.y1)),this.slidinglength<this.width&&console.log("Paddle sliding length smaller than paddle width!"),this.minPosition=this.width/this.slidinglength*100/2,this.maxPosition=100*(1-this.width/this.slidinglength/2)}return Object(l.a)(e,[{key:"getReflection",value:function(e){for(var t,i=this.getHitbox(),s=0;s<4&&(t=[i[s].x,i[s].y,i[(s+1)%4].x,i[(s+1)%4].y],!K.a.circleLine.apply(K.a,[e.x,e.y,e.radius].concat(Object(C.a)(t))));s++);var a=I({x:t[2]-t[0],y:t[3]-t[1]},Math.PI/2),n={x:(t[2]+t[0])/2,y:(t[3]+t[1])/2},r=Object(P.a)({},n);r.x+=1e-4*a.x,r.y+=1e-4*a.y,j(this.paddleCenterX,this.paddleCenterY,n.x,n.y)>j(this.paddleCenterX,this.paddleCenterY,r.x,r.y)&&(a.x*=-1,a.y*=-1);var h=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));a.x/=h,a.y/=h;var l=E({x:e.dx,y:e.dy},a,1);l.x+=.05*(e.x-this.paddleCenterX),l.y+=.05*(e.y-this.paddleCenterY);var o={x:this.paddleCenterX-this.previousCenterX,y:this.paddleCenterY-this.previousCenterY};return 0===o.x&&0===o.y?l:l=I(l,.2*function(e,t){var i=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),s=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)),a=e.x*t.x+e.y*t.y;return Math.acos(a/(i*s))}(l,o))}},{key:"render",value:function(e,t){var i=e.context;t.right&&this.position++,t.left&&this.position--,this.position>this.maxPosition&&(this.position=this.maxPosition),this.position<this.minPosition&&(this.position=this.minPosition),this.position=Math.round(this.position),this.previousCenterX=this.paddleCenterX,this.previousCenterY=this.paddleCenterY,this.paddleCenterX=this.x1*(1-this.position/100)+this.x2*this.position/100,this.paddleCenterY=this.y1*(1-this.position/100)+this.y2*this.position/100,i.save(),i.translate(.5,.5),i.strokeStyle="#000000",i.fillStyle="#888888",i.translate(this.paddleCenterX,this.paddleCenterY),i.rotate(this.tiltAngle),i.fillRect(-this.depth/2,-this.width/2,this.depth,this.width),i.restore()}},{key:"getHitbox",value:function(){var e=this,t=this.width/2,i=this.depth/2;return[{x:i,y:t},{x:i,y:-t},{x:-i,y:-t},{x:-i,y:t}].map(function(t){var i=I(t,e.tiltAngle),s=i.x,a=i.y;return{x:s+e.paddleCenterX,y:a+e.paddleCenterY}})}}]),e}(),A=function(){function e(t){Object(h.a)(this,e),this.x=t.x,this.y=t.y,this.dx=t.dx,this.dy=t.dy,this.radius=10,this.delete=!1}return Object(l.a)(e,[{key:"render",value:function(e){this.x+=this.dx,this.y+=this.dy;var t=e.context;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle="#0095DD",t.fill(),t.closePath()}}]),e}(),G={height:50,width:100,margin:"auto",padding:10},L={width:"50%",height:50,float:"left",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 0px 0px 10px red inset"},Y={marginLeft:"50%",height:50,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 0px 0px 10px blue inset"},X=function(e){function t(){return Object(h.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{style:G},a.a.createElement("div",{id:"red",style:L},this.props.redScore),a.a.createElement("div",{id:"blue",style:Y},this.props.blueScore))}}]),t}(a.a.Component),q=function(){function e(t){Object(h.a)(this,e),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2}return Object(l.a)(e,[{key:"getReflection",value:function(e){var t=I({x:this.x2-this.x1,y:this.y2-this.y1},Math.PI/2),i={x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2},s=Object(P.a)({},i);s.x+=.001*t.x,s.y+=.001*t.y,j(e.x,e.y,i.x,i.y)<j(e.x,e.y,s.x,s.y)&&(t.x*=-1,t.y*=-1);var a=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return t.x/=a,t.y/=a,E({x:e.dx,y:e.dy},t,1)}},{key:"render",value:function(e){var t=e.context;t.save(),t.strokeStyle="#000",t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke(),t.restore()}}]),e}(),F=function(){function e(t){Object(h.a)(this,e),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2,this.color=t.color,this.teamId=t.teamId}return Object(l.a)(e,[{key:"render",value:function(e){var t=e.context;t.save(),t.strokeStyle=this.color,t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke(),t.restore()}}]),e}();function U(e,t){return e+Math.random()*(t-e)}var D,T={STOPPED:0,RUNNING:1,GOAL_SCORED:2},H=0,W=1,B=function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={input:new O,context:null,gameState:T.RUNNING,redScore:0,blueScore:0,gameMode:1},i.draw=i.draw.bind(Object(y.a)(i)),i.reset1v1=i.reset1v1.bind(Object(y.a)(i)),i.reset2v2=i.reset2v2.bind(Object(y.a)(i)),i.reset3v3=i.reset3v3.bind(Object(y.a)(i)),i.resetPositions=i.resetPositions.bind(Object(y.a)(i)),i.renderPaddles=i.renderPaddles.bind(Object(y.a)(i)),i}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.input.bindKeys();var e=this.refs.canvas.getContext("2d");this.setState({context:e}),this.reset1v1(),D=requestAnimationFrame(this.draw)}},{key:"reset1v1",value:function(){this.setState({redScore:0,blueScore:0,gameState:T.RUNNING,gameMode:1}),this.walls=[new q({x1:0,y1:100,x2:500,y2:100}),new q({x1:0,y1:399,x2:500,y2:399})],this.goals=[new F({x1:0,y1:100,x2:0,y2:400,color:"red",teamId:H}),new F({x1:499,y1:100,x2:499,y2:400,color:"blue",teamId:W})],this.paddles=[new R({x1:10,y1:100,x2:10,y2:400}),new R({x1:490,y1:400,x2:490,y2:100})],this.ball=new A({x:250,y:250}),this.resetPositions()}},{key:"reset2v2",value:function(){this.setState({redScore:0,blueScore:0,gameState:T.RUNNING,gameMode:2}),this.walls=[],this.goals=[new F({x1:0,y1:250,x2:250,y2:0,color:"red",teamId:H}),new F({x1:250,y1:0,x2:500,y2:250,color:"red",teamId:H}),new F({x1:0,y1:250,x2:250,y2:500,color:"blue",teamId:W}),new F({x1:250,y1:500,x2:500,y2:250,color:"blue",teamId:W})],this.paddles=[new R({x1:10,y1:250,x2:250,y2:10}),new R({x1:250,y1:10,x2:490,y2:250}),new R({x1:250,y1:490,x2:490,y2:250}),new R({x1:10,y1:250,x2:250,y2:490})],this.ball=new A({x:250,y:250}),this.resetPositions()}},{key:"reset3v3",value:function(){this.setState({redScore:0,blueScore:0,gameState:T.RUNNING,gameMode:3}),this.walls=[],this.goals=[];for(var e=0;e<6;e++){var t=I({x:250,y:0},e*Math.PI/3),i=I({x:250,y:0},(e+1)*Math.PI/3),s=e<3?"blue":"red",a="red"===s?H:W;this.goals.push(new F({x1:t.x+250,y1:t.y+250,x2:i.x+250,y2:i.y+250,color:s,teamId:a}))}this.paddles=[];for(var n=0;n<3;n++){var r=I({x:-240,y:0},n*Math.PI/3),h=I({x:-240,y:0},(n+1)*Math.PI/3);this.paddles.push(new R({x1:r.x+250,y1:r.y+250,x2:h.x+250,y2:h.y+250}))}for(var l=0;l<3;l++){var o=this.paddles[2-l],d=o.x1,y=o.y1,c=o.x2,u=o.y2;this.paddles.push(new R({x1:d,y1:500-y,x2:c,y2:500-u}))}this.ball=new A({x:250,y:250}),this.resetPositions()}},{key:"resetPositions",value:function(){var e=I({x:3,y:0},1===this.state.gameMode?U(-Math.PI/4,Math.PI/4):U(0,Math.PI/2));1===this.state.gameMode&&Math.random()>.5&&(e.x*=-1,e.y*=-1),this.ball=new A({x:250,y:250,dx:e.x,dy:e.y}),this.paddles.forEach(function(e){return e.position=50})}},{key:"renderPaddles",value:function(){var e=this.state.input.pressedKeys;switch(this.state.gameMode){case 1:this.paddles[0].render(this.state,e.red1),this.paddles[1].render(this.state,e.blue1);break;case 2:this.paddles[0].render(this.state,e.red1),this.paddles[1].render(this.state,e.red2),this.paddles[2].render(this.state,e.blue1),this.paddles[3].render(this.state,e.blue2);break;case 3:this.paddles[0].render(this.state,e.red1),this.paddles[1].render(this.state,e.red2),this.paddles[2].render(this.state,e.red3),this.paddles[3].render(this.state,e.blue1),this.paddles[4].render(this.state,e.blue2),this.paddles[5].render(this.state,e.blue3);break;default:console.log("WHY")}}},{key:"draw",value:function(){var e=this,t=this.state.context;t.save(),t.fillStyle="#FFF",t.translate(.5,.5),t.fillRect(0,0,500,500),this.walls.forEach(function(t){t.render(e.state)}),this.goals.forEach(function(t){t.render(e.state)}),this.paddles.forEach(function(t){var i=t.getHitbox().flatMap(function(e){return[e.x,e.y]});if(K.a.circlePolygon(e.ball.x,e.ball.y,e.ball.radius,i)){var s=t.getReflection(e.ball);e.ball.dx=s.x,e.ball.dy=s.y,e.ball.x+=e.ball.dx,e.ball.y+=e.ball.dy}}),this.walls.forEach(function(t){if(K.a.circleLine(e.ball.x,e.ball.y,e.ball.radius,t.x1,t.y1,t.x2,t.y2)){var i=t.getReflection(e.ball);e.ball.dx=i.x,e.ball.dy=i.y,e.ball.x+=e.ball.dx,e.ball.y+=e.ball.dy}}),this.goals.forEach(function(i){var s;K.a.circleLine(e.ball.x,e.ball.y,e.ball.radius,i.x1,i.y1,i.x2,i.y2)&&(i.teamId===H?(e.setState(function(e){return{blueScore:e.blueScore+1}}),s="Blue team",t.fillStyle="blue"):(e.setState(function(e){return{redScore:e.redScore+1}}),s="Red team",t.fillStyle="red"),t.font="30px Courier New",t.fillText(s+" has scored!",80,250),cancelAnimationFrame(D),e.setState({gameState:T.GOAL_SCORED}))}),this.renderPaddles(),this.ball.render(this.state),t.restore(),this.state.gameState===T.RUNNING?D=requestAnimationFrame(this.draw):this.state.gameState===T.GOAL_SCORED&&(cancelAnimationFrame(D),setTimeout(function(){D=requestAnimationFrame(e.draw),e.resetPositions(),e.setState({gameState:T.RUNNING})},1500))}},{key:"componentWillUnmount",value:function(){this.state.input.unbindKeys()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Pong++"),a.a.createElement("canvas",{ref:"canvas",width:"501",height:"501"}),a.a.createElement(X,{redScore:this.state.redScore,blueScore:this.state.blueScore}),a.a.createElement("center",null,"Reset Game"),a.a.createElement("center",null,a.a.createElement("button",{id:"1v1",onClick:this.reset1v1},"1v1"),a.a.createElement("button",{id:"2v2",onClick:this.reset2v2},"2v2"),a.a.createElement("button",{id:"3v3",onClick:this.reset3v3},"3v3")))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.edb958dc.chunk.js.map